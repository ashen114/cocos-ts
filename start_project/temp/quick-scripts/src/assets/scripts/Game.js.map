{"version":3,"sources":["assets\\scripts\\Game.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAAkC,wBAAY;IAD9C;QAAA,qEAyEC;QAvEC,0BAA0B;QAE1B,gBAAU,GAAc,IAAI,CAAC,CAAC,gBAAgB;QAE9C,iBAAiB;QAEjB,qBAAe,GAAW,CAAC,CAAC;QAE5B,qBAAe,GAAW,CAAC,CAAC;QAG5B,YAAM,GAAY,IAAI,CAAC,CAAC,mBAAmB;QAG3C,YAAM,GAAY,IAAI,CAAC,CAAC,kCAAkC;QAE1D,0BAA0B;QAC1B,aAAO,GAAW,CAAC,CAAC,CAAC,aAAa;;IAsDpC,CAAC;IApDC,0BAA0B;IAC1B,qBAAM,GAAN;QACE,eAAe;QACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QAEtD,WAAW;QACX,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,oBAAK,GAAL,cAAe,CAAC;IAEhB,qBAAM,GAAN,UAAO,EAAU,IAAS,CAAC;IAE3B,wBAAS,GAAT,cAAmB,CAAC;IAEpB,0BAA0B;IAC1B;;OAEG;IACH,2BAAY,GAAZ;QACE,qBAAqB;QACrB,IAAI,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAE9C,wBAAwB;QACxB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAE5B,eAAe;QACf,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;QAE/C,sBAAsB;QACtB,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;IAC3C,CAAC;IAED;;OAEG;IACH,iCAAkB,GAAlB;QACE,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,gCAAgC;QAChC,IAAI,KAAK,GACP,IAAI,CAAC,OAAO;YACZ,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,UAAU;YAC7D,EAAE,CAAC;QAEL,uBAAuB;QACvB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAC/B,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;QAEzC,SAAS;QACT,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC7B,CAAC;IApED;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACS;IAI7B;QADC,QAAQ;iDACmB;IAE5B;QADC,QAAQ;iDACmB;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wCACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wCACK;IAfJ,IAAI;QADxB,OAAO;OACa,IAAI,CAwExB;IAAD,WAAC;CAxED,AAwEC,CAxEiC,EAAE,CAAC,SAAS,GAwE7C;kBAxEoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n  ////////// 注入属性 //////////\r\n  @property(cc.Prefab)\r\n  starPrefab: cc.Prefab = null; // 这个属性引用了星星预制资源\r\n\r\n  // 星星产生后消失时间的随机范围\r\n  @property\r\n  maxStarDuration: number = 0;\r\n  @property\r\n  minStarDuration: number = 0;\r\n\r\n  @property(cc.Node)\r\n  ground: cc.Node = null; // 地面节点，用于确定星星生成的高度\r\n\r\n  @property(cc.Node)\r\n  player: cc.Node = null; // player 节点，用于获取主角弹跳的高度，和控制主角行动开关\r\n\r\n  ////////// 默认属性 //////////\r\n  groundY: number = 0; // 地平面的 y 轴坐标\r\n\r\n  ////////// 生命周期 //////////\r\n  onLoad(): void {\r\n    // 获取地平面的 y 轴坐标\r\n    this.groundY = this.ground.y + this.ground.height / 2;\r\n\r\n    // 生成一个新的星星\r\n    this.spawnNewStar();\r\n  }\r\n\r\n  start(): void {}\r\n\r\n  update(dt: number): void {}\r\n\r\n  onDestroy(): void {}\r\n\r\n  ////////// 功能函数 //////////\r\n  /**\r\n   * 生成一个新的星星\r\n   */\r\n  spawnNewStar(): void {\r\n    // 使用给定的模板在场景生成一个新的节点\r\n    let newStar = cc.instantiate(this.starPrefab);\r\n\r\n    // 将新增的节点添加到 Canvas 节点下面\r\n    this.node.addChild(newStar);\r\n\r\n    // 为星星设置一个随机的位置\r\n    newStar.setPosition(this.getNewStarPosition());\r\n\r\n    // 在星星组件上暂存 Game 对象的引用\r\n    newStar.getComponent(\"Star\").game = this;\r\n  }\r\n\r\n  /**\r\n   * 设置一个随机的位置\r\n   */\r\n  getNewStarPosition(): cc.Vec2 {\r\n    let randX = 0;\r\n\r\n    // 根据地平面位置和主角跳跃高度，随机得到一个星星的 y 坐标\r\n    let randY =\r\n      this.groundY +\r\n      Math.random() * this.player.getComponent(\"Player\").jumpHeight +\r\n      50;\r\n\r\n    // 根据屏幕宽度，随机得到一个星星 x 坐标\r\n    let maxX = this.node.width / 2;\r\n    randX = (Math.random() - 0.5) * 2 * maxX;\r\n\r\n    // 返回星星坐标\r\n    return cc.v2(randX, randY);\r\n  }\r\n}\r\n"]}